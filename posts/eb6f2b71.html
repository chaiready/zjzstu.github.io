<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="alternate" href="/./atom.xml" title="做一个幸福的人" type="application/atom+xml"><meta name="google-site-verification" content="Qr_3yqLtyErDFKHW7mE8PJz4qDUX-bf_fMLpSRckQe4"><meta name="baidu-site-verification" content="zOwIvKMV7f"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Roboto:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-center-atom.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"7.5.0",exturl:!1,sidebar:{position:"left",display:"post",offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"搜索文章",hits_empty:"我们没有找到任何搜索结果: ${query}",hits_stats:"找到约${hits}条结果（用时${time}ms）"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},translation:{copy_button:"复制",copy_success:"复制成功",copy_failure:"复制失败"},sidebarPadding:40}</script><link href="https://fonts.googleapis.com/css?family=Noto+Serif+SC|Roboto&display=swap" rel="stylesheet"><meta name="description" content="参考：Visualizing Models, Data, and Training with TensorBoard"><meta name="keywords" content="python,pytorch,torchvision,tensorboard"><meta property="og:type" content="article"><meta property="og:title" content="[PyTorch]Tensorboard可视化实现"><meta property="og:url" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;posts&#x2F;eb6f2b71.html"><meta property="og:site_name" content="做一个幸福的人"><meta property="og:description" content="参考：Visualizing Models, Data, and Training with TensorBoard"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;tensorboard&#x2F;add_image.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;tensorboard&#x2F;add_graph.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;tensorboard&#x2F;expand_model.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;tensorboard&#x2F;add_embedding.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;tensorboard&#x2F;add_scalar.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;tensorboard&#x2F;expand_scalar.png"><meta property="og:updated_time" content="2020-02-15T05:36:35.871Z"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;tensorboard&#x2F;add_image.png"><link rel="canonical" href="https://www.zhujian.tech/posts/eb6f2b71.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,isPage:!1,isArchive:!1}</script><title>[PyTorch]Tensorboard可视化实现 | 做一个幸福的人</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?e677aac1ac69b8826b9cfecb4e72e107";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">做一个幸福的人</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">面朝大海，春暖花开</p></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签<span class="badge">129</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类<span class="badge">48</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档<span class="badge">169</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header> <a href="https://github.com/zjZSTU" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.zhujian.tech/posts/eb6f2b71.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="zhujian"><meta itemprop="description" content="one bite at a time"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="做一个幸福的人"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> [PyTorch]Tensorboard可视化实现</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-12-11 14:56:00" itemprop="dateCreated datePublished" datetime="2019-12-11T14:56:00+00:00">2019-12-11</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-02-15 05:36:35" itemprop="dateModified" datetime="2020-02-15T05:36:35+00:00">2020-02-15</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/tool/" itemprop="url" rel="index"><span itemprop="name">工具</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming/programming-language/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming/codebase/" itemprop="url" rel="index"><span itemprop="name">代码库</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>6.5k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>11 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>参考：<a href="https://pytorch.org/tutorials/intermediate/tensorboard_tutorial.html#visualizing-models-data-and-training-with-tensorboard" target="_blank" rel="noopener">Visualizing Models, Data, and Training with TensorBoard</a></p><a id="more"></a><p>最新版本的<code>PyTorch 1.3</code>内置支持了<a href="https://github.com/tensorflow/tensorboard" target="_blank" rel="noopener">Tensorboard</a>，实现模型、数据以及训练可视化</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>除了安装<code>PyTorch</code>以外，还需要额外安装<code>Tensorboard</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install tensorboard</span><br></pre></td></tr></table></figure><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><p>启动<code>tensorboard</code>，指定文件路径，<code>IP</code>地址以及端口号</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tensorboard --logdir PATH --host ADDR --port PORT</span><br></pre></td></tr></table></figure><ul><li><code>logdir</code>：指定<code>Tensorflow event files</code>文件路径，通常设置为<code>runs</code>，会递归搜索<code>runs</code>文件夹内命名为<code>*tfevents.*</code>文件</li><li><code>host</code>：制定监听的主机名，默认为<code>localhost</code></li><li><code>port</code>：监听端口，默认为<code>6006</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ tensorboard --logdir=runs --host=192.168.0.112 --port=7878</span><br><span class="line">TensorFlow installation not found - running with reduced feature set.</span><br><span class="line">W1211 15:14:25.693824 140379677206272 plugin_event_accumulator.py:294] Found more than one graph event per run, or there was a metagraph containing a graph_def, as well as one or more graph events.  Overwriting the graph with the newest event.</span><br><span class="line">W1211 15:14:25.694132 140379677206272 plugin_event_accumulator.py:322] Found more than one &quot;run metadata&quot; event with tag step1. Overwriting it with the newest event.</span><br><span class="line">TensorBoard 2.0.0 at http://192.168.0.112:7878/ (Press CTRL+C to quit)</span><br></pre></td></tr></table></figure><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="pytorch-ImportError-TensorBoard-logging-requires-TensorBoard-with-Python-summary-writer-installed"><a href="#pytorch-ImportError-TensorBoard-logging-requires-TensorBoard-with-Python-summary-writer-installed" class="headerlink" title="pytorch ImportError: TensorBoard logging requires TensorBoard with Python summary writer installed"></a>pytorch ImportError: TensorBoard logging requires TensorBoard with Python summary writer installed</h3><p>参考：<a href="https://blog.csdn.net/wangweiwells/article/details/101565407" target="_blank" rel="noopener">pytorch ImportError: TensorBoard logging requires TensorBoard with Python summary writer installed</a></p><p>安装<code>tensorboard</code>即可</p><h3 id="tensorboard-shows-a-SyntaxError-can’t-assign-to-operator"><a href="#tensorboard-shows-a-SyntaxError-can’t-assign-to-operator" class="headerlink" title="tensorboard shows a SyntaxError: can’t assign to operator"></a>tensorboard shows a SyntaxError: can’t assign to operator</h3><p>在<code>JupyterLab</code>上启动<code>Tensorboard</code>，发现如上问题，参考<a href="https://stackoverflow.com/questions/45392902/tensorboard-shows-a-syntaxerror-cant-assign-to-operator" target="_blank" rel="noopener">tensorboard shows a SyntaxError: can’t assign to operator</a>。解决方案：在命令前添加<code>!</code>即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!tensorboard --logdir=runs</span><br></pre></td></tr></table></figure><h3 id="can’t-assign-to-operator"><a href="#can’t-assign-to-operator" class="headerlink" title="can’t assign to operator"></a>can’t assign to operator</h3><p>在<code>PyCharm</code>启动<code>tensorboard</code>时出现上述错误，参考<a href="https://blog.csdn.net/weixin_40292207/article/details/80672041" target="_blank" rel="noopener">运行tensorboard —logdir=log遇到的错误之can’t assign to operator</a>，新开一个命令行窗口启动即可</p><h2 id="入口函数"><a href="#入口函数" class="headerlink" title="入口函数"></a>入口函数</h2><p><a href="https://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter" target="_blank" rel="noopener">SummaryWriter</a>类提供了一个高级<code>API</code>，用于在给定目录中创建事件文件并向其中添加摘要和事件。该对象异步更新文件内容，这样允许训练程序直接在训练过程中调用方法循环向文件中添加数据，而不会减慢训练速度</p><p>所有的<code>PyTorch</code>数据写入操作均通过<code>SummaryWriter</code>实现，声明如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from torch.utils.tensorboard import SummaryWriter</span><br><span class="line"></span><br><span class="line"># default `log_dir` is &quot;runs&quot; - we&apos;ll be more specific here</span><br><span class="line">writer = SummaryWriter(&apos;runs/fashion_mnist_experiment_1&apos;)</span><br></pre></td></tr></table></figure><p>需要指定文件保存路径，通常设置为<code>runs</code></p><p><strong>注意：后续的写入操作完成后调用<code>close</code>函数结束</strong></p><h2 id="add-image"><a href="#add-image" class="headerlink" title="add_image"></a>add_image</h2><p>增加图像数据到<code>Tensorboard</code>，使用函数<a href="https://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter.add_image" target="_blank" rel="noopener">add_image</a></p><p><strong>注意：需要额外安装<code>pillow</code></strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def add_image(self, tag, img_tensor, global_step=None, walltime=None, dataformats=&apos;CHW&apos;):</span><br></pre></td></tr></table></figure><ul><li><code>tag</code>：数据标识符</li><li><code>img_tensor：torch.Tensor</code>格式图像</li></ul><p>使用如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">import torch</span><br><span class="line">from torch.utils.tensorboard import SummaryWriter</span><br><span class="line"></span><br><span class="line"># default `log_dir` is &quot;runs&quot; - we&apos;ll be more specific here</span><br><span class="line">writer = SummaryWriter(&apos;runs/test&apos;)</span><br><span class="line"></span><br><span class="line">lena = cv2.imread(&apos;lena.jpg&apos;)</span><br><span class="line">lena = cv2.cvtColor(lena, cv2.COLOR_BGR2RGB)</span><br><span class="line">lena_tensor = torch.from_numpy(lena.transpose((2, 0, 1)))</span><br><span class="line">print(lena_tensor.size())</span><br><span class="line"></span><br><span class="line"># 写入</span><br><span class="line">writer.add_image(&apos;lena&apos;, lena_tensor)</span><br><span class="line">writer.close()</span><br></pre></td></tr></table></figure><p>完成上述操作后，在<code>tensorboard</code>页面菜单栏选择<code>IMAGES</code>标签，会出现写入的<code>lena</code>图像</p><p><img src="/imgs/tensorboard/add_image.png" alt></p><p><em>可以在同一个标签上添加多个图像，在页面上拖动滑动条显示不同的图像</em></p><h2 id="add-graph"><a href="#add-graph" class="headerlink" title="add_graph"></a>add_graph</h2><p>调用函数<a href="https://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter.add_graph" target="_blank" rel="noopener">add_graph</a>实现模型可视化</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def add_graph(self, model, input_to_model=None, verbose=False):</span><br></pre></td></tr></table></figure><ul><li><code>model：torch.nn.Module</code>（待绘制的模型）</li><li><code>input_to_model</code>：模型输入数据，可输入单张图像（<code>torch.Tensor</code>）或者图像列表（<code>list of torch.Tensor</code>）</li><li><code>verbose</code>：是否在控制台详细打印图结构</li></ul><p>使用如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">import torch.nn as nn</span><br><span class="line">import torch.nn.functional as F</span><br><span class="line"></span><br><span class="line">import torchvision</span><br><span class="line">import torchvision.transforms as transforms</span><br><span class="line"></span><br><span class="line"># 定义模型</span><br><span class="line">class Net(nn.Module):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        super(Net, self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(1, 6, 5)</span><br><span class="line">        self.pool = nn.MaxPool2d(2, 2)</span><br><span class="line">        self.conv2 = nn.Conv2d(6, 16, 5)</span><br><span class="line">        self.fc1 = nn.Linear(16 * 4 * 4, 120)</span><br><span class="line">        self.fc2 = nn.Linear(120, 84)</span><br><span class="line">        self.fc3 = nn.Linear(84, 10)</span><br><span class="line"></span><br><span class="line">    def forward(self, x):</span><br><span class="line">        x = self.pool(F.relu(self.conv1(x)))</span><br><span class="line">        x = self.pool(F.relu(self.conv2(x)))</span><br><span class="line">        x = x.view(-1, 16 * 4 * 4)</span><br><span class="line">        x = F.relu(self.fc1(x))</span><br><span class="line">        x = F.relu(self.fc2(x))</span><br><span class="line">        x = self.fc3(x)</span><br><span class="line">        return x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">net = Net()</span><br><span class="line">print(net)</span><br><span class="line"></span><br><span class="line"># 获取数据</span><br><span class="line"># transforms</span><br><span class="line">transform = transforms.Compose(</span><br><span class="line">    [transforms.ToTensor(),</span><br><span class="line">     transforms.Normalize((0.5,), (0.5,))])</span><br><span class="line"></span><br><span class="line"># datasets</span><br><span class="line">trainset = torchvision.datasets.FashionMNIST(&apos;./data&apos;,</span><br><span class="line">                                             download=True,</span><br><span class="line">                                             train=True,</span><br><span class="line">                                             transform=transform)</span><br><span class="line">testset = torchvision.datasets.FashionMNIST(&apos;./data&apos;,</span><br><span class="line">                                            download=True,</span><br><span class="line">                                            train=False,</span><br><span class="line">                                            transform=transform)</span><br><span class="line"></span><br><span class="line"># dataloaders</span><br><span class="line">trainloader = torch.utils.data.DataLoader(trainset, batch_size=4,</span><br><span class="line">                                          shuffle=True, num_workers=2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">testloader = torch.utils.data.DataLoader(testset, batch_size=4,</span><br><span class="line">                                         shuffle=False, num_workers=2)</span><br><span class="line"></span><br><span class="line"># constant for classes</span><br><span class="line">classes = (&apos;T-shirt/top&apos;, &apos;Trouser&apos;, &apos;Pullover&apos;, &apos;Dress&apos;, &apos;Coat&apos;,</span><br><span class="line">           &apos;Sandal&apos;, &apos;Shirt&apos;, &apos;Sneaker&apos;, &apos;Bag&apos;, &apos;Ankle Boot&apos;)</span><br><span class="line"></span><br><span class="line"># get some random training images</span><br><span class="line">dataiter = iter(trainloader)</span><br><span class="line">images, labels = dataiter.next()</span><br><span class="line">print(images.size())</span><br><span class="line"></span><br><span class="line">## 写入模型</span><br><span class="line">writer.add_graph(net, input_to_model=images,verbose=True)</span><br><span class="line">writer.close()</span><br></pre></td></tr></table></figure><p>完成上述操作后，在<code>tensorboard</code>页面菜单栏选择<code>GRAPHS</code>标签，会可视化模型，双击即可扩展模型细节</p><p><img src="/imgs/tensorboard/add_graph.png" alt></p><p><img src="/imgs/tensorboard/expand_model.png" alt></p><h2 id="add-embedding"><a href="#add-embedding" class="headerlink" title="add_embedding"></a>add_embedding</h2><p>调用函数<a href="https://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter.add_graph" target="_blank" rel="noopener">add_embedding</a>实现高维数据可视化</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def add_embedding(self, mat, metadata=None, label_img=None, global_step=None, tag=&apos;default&apos;, metadata_header=None):</span><br></pre></td></tr></table></figure><ul><li><code>mat</code>：矩阵，每行表示一个数据点的特征向量，其大小为$(N,D)$</li><li><code>metadata</code>：字符串列表，表示标签</li><li><code>label_imgs</code>：相对于每个数据点的图像列表，其大小为$(N,C,H,W)$</li></ul><p>测试如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import keyword</span><br><span class="line">import torch</span><br><span class="line"></span><br><span class="line">// 提取关键字</span><br><span class="line">meta = []</span><br><span class="line">while len(meta)&lt;100:</span><br><span class="line">    meta = meta+keyword.kwlist # get some strings</span><br><span class="line">// 取前100个</span><br><span class="line">meta = meta[:100]</span><br><span class="line"></span><br><span class="line">// 转换成标签</span><br><span class="line">for i, v in enumerate(meta):</span><br><span class="line">    meta[i] = v+str(i)</span><br><span class="line"></span><br><span class="line">// 随机生成100张图像</span><br><span class="line">label_img = torch.rand(100, 3, 10, 32)</span><br><span class="line">// 缩放到(0,1)</span><br><span class="line">for i in range(100):</span><br><span class="line">    label_img[i]*=i/100.0</span><br><span class="line"></span><br><span class="line">writer.add_embedding(torch.randn(100, 5), metadata=meta, label_img=label_img)</span><br><span class="line">writer.close()</span><br></pre></td></tr></table></figure><p>完成上述操作后，在<code>tensorboard</code>页面菜单栏选择<code>PROJECTOR</code>标签，将高维数据投影到<code>3</code>维空间中</p><p><img src="/imgs/tensorboard/add_embedding.png" alt></p><h2 id="add-scalar"><a href="#add-scalar" class="headerlink" title="add_scalar"></a>add_scalar</h2><p>调用函数<a href="https://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter.add_scalar" target="_blank" rel="noopener">add_scalar</a>或者<a href="https://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter.add_scalars" target="_blank" rel="noopener">add_scalars</a>实现训练数据实时写入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def add_scalar(self, tag, scalar_value, global_step=None, walltime=None):</span><br><span class="line">def add_scalars(self, main_tag, tag_scalar_dict, global_step=None, walltime=None):</span><br></pre></td></tr></table></figure><ul><li><code>main_tag</code>：标识符</li><li><code>scalar_value</code>：浮点值（<code>float</code>）或者字符串（<code>str</code>）</li><li><code>tag_scalar_dict：dict</code>，以键值对的方式保存子标签和相应的值</li><li><code>global_step</code>：步长</li></ul><p>实现如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">r = 5</span><br><span class="line">for i in range(100):</span><br><span class="line">    writer.add_scalars(&apos;run_14h&apos;, &#123;&apos;xsinx&apos;:i*np.sin(i/r),</span><br><span class="line">                                    &apos;xcosx&apos;:i*np.cos(i/r),</span><br><span class="line">                                    &apos;tanx&apos;: np.tan(i/r)&#125;, i)</span><br><span class="line">writer.close()</span><br><span class="line"># This call adds three values to the same scalar plot with the tag</span><br><span class="line"># &apos;run_14h&apos; in TensorBoard&apos;s scalar section.</span><br></pre></td></tr></table></figure><p>点击菜单栏的<code>SCALARS</code>标签，能够显示实时的训练数据</p><p><img src="/imgs/tensorboard/add_scalar.png" alt></p><p>将鼠标移动到图中，会显示不同阶段相应的训练结果</p><p><img src="/imgs/tensorboard/expand_scalar.png" alt></p><h2 id="add-figure"><a href="#add-figure" class="headerlink" title="add_figure"></a>add_figure</h2><p><a href="https://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter.add_figure" target="_blank" rel="noopener">add_figure</a>作用与<code>add_image</code>类似，均是显示图像到<code>tensorboard</code>页面，不同的是<code>add_figure</code>指定渲染<code>Matplotlib</code>图像</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def add_figure(self, tag, figure, global_step=None, close=True, walltime=None):</span><br></pre></td></tr></table></figure><ul><li><code>tag</code>：标识符</li><li><code>figure：matplotlib.pyplot.figure</code>格式图像</li><li><code>global_step</code>：步长</li></ul><p>实现如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">plt.imshow(lena)</span><br><span class="line">writer.add_figure(&apos;plt&apos;, fig, 0)</span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">plt.imshow(gray, cmap=&quot;Greys&quot;)</span><br><span class="line">writer.add_figure(&apos;plt&apos;, fig, 1)</span><br></pre></td></tr></table></figure><p>写入后即可在<code>IMAGES</code>页面查询</p><h2 id="add-pr-curve"><a href="#add-pr-curve" class="headerlink" title="add_pr_curve"></a>add_pr_curve</h2><p>调用函数<a href="https://pytorch.org/docs/stable/tensorboard.html#torch.utils.tensorboard.writer.SummaryWriter.add_figure" target="_blank" rel="noopener">add_pr_curve</a>绘制精度召回曲线（<code>precision-recall curve</code>）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def add_pr_curve(self, tag, labels, predictions, global_step=None,</span><br><span class="line">                     num_thresholds=127, weights=None, walltime=None):</span><br></pre></td></tr></table></figure><ul><li><code>tag</code>：数据标识符</li><li><code>labels</code>：真实标签。取值为二值标签</li><li><code>predictions</code>：元素被归为正确的概率，取值为0或1</li><li><code>global_step</code>：步长</li><li><code>num_thresholds</code>：绘制曲线的阈值数量</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">labels = np.random.randint(2, size=100)  # binary label</span><br><span class="line">print(labels)</span><br><span class="line">predictions = np.random.rand(100)</span><br><span class="line">print(predictions)</span><br><span class="line"></span><br><span class="line">writer.add_pr_curve(&apos;pr_curve&apos;, labels, predictions, 0)</span><br><span class="line">writer.close()</span><br></pre></td></tr></table></figure></div><div class="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';"> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="/images/wechatpay.jpg" alt="zhujian 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="/images/alipay.jpg" alt="zhujian 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> zhujian</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.zhujian.tech/posts/eb6f2b71.html" title="[PyTorch]Tensorboard可视化实现">https://www.zhujian.tech/posts/eb6f2b71.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/python/" rel="tag"># python</a> <a href="/tags/pytorch/" rel="tag"># pytorch</a> <a href="/tags/torchvision/" rel="tag"># torchvision</a> <a href="/tags/tensorboard/" rel="tag"># tensorboard</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/posts/631c599a.html" rel="next" title="[数据集]Fashion-MNIST"><i class="fa fa-chevron-left"></i> [数据集]Fashion-MNIST</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/posts/f793688d.html" rel="prev" title="[PyTorch]Tensorboard使用实践">[PyTorch]Tensorboard使用实践<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments" id="gitalk-container"></div></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装"><span class="nav-number">1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#启动"><span class="nav-number">2.</span> <span class="nav-text">启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常见问题"><span class="nav-number">3.</span> <span class="nav-text">常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-ImportError-TensorBoard-logging-requires-TensorBoard-with-Python-summary-writer-installed"><span class="nav-number">3.1.</span> <span class="nav-text">pytorch ImportError: TensorBoard logging requires TensorBoard with Python summary writer installed</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tensorboard-shows-a-SyntaxError-can’t-assign-to-operator"><span class="nav-number">3.2.</span> <span class="nav-text">tensorboard shows a SyntaxError: can’t assign to operator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#can’t-assign-to-operator"><span class="nav-number">3.3.</span> <span class="nav-text">can’t assign to operator</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#入口函数"><span class="nav-number">4.</span> <span class="nav-text">入口函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#add-image"><span class="nav-number">5.</span> <span class="nav-text">add_image</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#add-graph"><span class="nav-number">6.</span> <span class="nav-text">add_graph</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#add-embedding"><span class="nav-number">7.</span> <span class="nav-text">add_embedding</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#add-scalar"><span class="nav-number">8.</span> <span class="nav-text">add_scalar</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#add-figure"><span class="nav-number">9.</span> <span class="nav-text">add_figure</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#add-pr-curve"><span class="nav-number">10.</span> <span class="nav-text">add_pr_curve</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="zhujian" src="/images/avatar.png"><p class="site-author-name" itemprop="name">zhujian</p><div class="site-description" itemprop="description">one bite at a time</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">169</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">48</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">129</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="feed-link motion-element"><a href="/./atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/zjZSTU" title="Github &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;zjZSTU" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a></span><span class="links-of-author-item"><a href="https://blog.csdn.net/u012005313" title="CSDN &amp;rarr; https:&#x2F;&#x2F;blog.csdn.net&#x2F;u012005313" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i> CSDN</a></span><span class="links-of-author-item"><a href="/mailto:zjzstu@gmail.com" title="Gmail &amp;rarr; mailto:zjzstu@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> Gmail</a></span><span class="links-of-author-item"><a href="/mailto:505169307@gmail.com" title="QQmail &amp;rarr; mailto:505169307@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> QQmail</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://cloud.tencent.com/" title="https:&#x2F;&#x2F;cloud.tencent.com" rel="noopener" target="_blank">腾讯云</a></li><li class="links-of-blogroll-item"> <a href="https://www.aliyun.com/" title="https:&#x2F;&#x2F;www.aliyun.com" rel="noopener" target="_blank">阿里云</a></li><li class="links-of-blogroll-item"> <a href="https://developer.android.com/" title="https:&#x2F;&#x2F;developer.android.com&#x2F;" rel="noopener" target="_blank">Android Dev</a></li><li class="links-of-blogroll-item"> <a href="https://jenkins.io/" title="https:&#x2F;&#x2F;jenkins.io&#x2F;" rel="noopener" target="_blank">Jenkins</a></li><li class="links-of-blogroll-item"> <a href="http://cs231n.github.io/" title="http:&#x2F;&#x2F;cs231n.github.io&#x2F;" rel="noopener" target="_blank">cs231n</a></li><li class="links-of-blogroll-item"> <a href="https://pytorch.org/docs/stable/index.html" title="https:&#x2F;&#x2F;pytorch.org&#x2F;docs&#x2F;stable&#x2F;index.html" rel="noopener" target="_blank">pytorch</a></li><li class="links-of-blogroll-item"> <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" title="https:&#x2F;&#x2F;docs.docker.com&#x2F;install&#x2F;linux&#x2F;docker-ce&#x2F;ubuntu&#x2F;" rel="noopener" target="_blank">docker</a></li></ul></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">zhujian</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">948k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">26:20</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-bar-chart-o"></i></span> <a href="https://tongji.baidu.com/web/27249108/overview/index?siteId=13647183" rel="noopener" target="_blank">百度统计</a></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.5.0</div><div class="beian"> <a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">浙ICP备 19026415号</a> <span class="post-meta-divider">|</span> <img src="/images/beian_icon.png" style="display:inline-block;text-decoration:none;height:13px"> <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33011802001748" rel="noopener" target="_blank">浙公网安备 33011802001748号</a></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span> <span class="site-uv" title="总访客量">访客数：<span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="site-pv" title="总访问量">阅读量：<span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script color="17,63,61" opacity="1" zindex="-1" count="199" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script><script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '8f22595c6dd29c94467d',
      clientSecret: 'e66bd90ebb9aa66c562c753dec6c90ceecbd51f2',
      repo: 'guestbook',
      owner: 'zjZSTU',
      admin: ['zjZSTU'],
      id: '07fd7874a0c040d79a72d5b63c6d3163',
        language: '',
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script></body></html>