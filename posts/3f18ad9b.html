<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="alternate" href="/./atom.xml" title="做一个幸福的人" type="application/atom+xml"><meta name="google-site-verification" content="Qr_3yqLtyErDFKHW7mE8PJz4qDUX-bf_fMLpSRckQe4"><meta name="baidu-site-verification" content="zOwIvKMV7f"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Roboto:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-center-atom.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"7.5.0",exturl:!1,sidebar:{position:"left",display:"post",offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"搜索文章",hits_empty:"我们没有找到任何搜索结果: ${query}",hits_stats:"找到约${hits}条结果（用时${time}ms）"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},translation:{copy_button:"复制",copy_success:"复制成功",copy_failure:"复制失败"},sidebarPadding:40}</script><link href="https://fonts.googleapis.com/css?family=Noto+Serif+SC|Roboto&display=swap" rel="stylesheet"><meta name="description" content="参考：可视化理解卷积神经网络Deep Visualization:可视化并理解CNN文章Visualizing and Understanding Convolutional Networks提出一种可视化方法来观察中间层特征，以此发现不同模型层的性能分布，调整AlexNet参数的得到的ZFNet模型在ImageNet上得到了更好的分类性能；通过预训练ImageNet模型测试发现预训练大数据库能够"><meta name="keywords" content="ZFNet"><meta property="og:type" content="article"><meta property="og:title" content="可视化理解卷积神经网络"><meta property="og:url" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;posts&#x2F;3f18ad9b.html"><meta property="og:site_name" content="做一个幸福的人"><meta property="og:description" content="参考：可视化理解卷积神经网络Deep Visualization:可视化并理解CNN文章Visualizing and Understanding Convolutional Networks提出一种可视化方法来观察中间层特征，以此发现不同模型层的性能分布，调整AlexNet参数的得到的ZFNet模型在ImageNet上得到了更好的分类性能；通过预训练ImageNet模型测试发现预训练大数据库能够"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;deconvnet.PNG"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;figure-1.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;figure_2-1.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;figure_2-2.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;figure-3.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;figure-4.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;figure_6.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;table_1.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;figure-5.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;ZFNet.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;training_result.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;table_2.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;table_3.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;table_4.png"><meta property="og:updated_time" content="2020-02-15T05:36:35.871Z"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;可视化理解卷积神经网络&#x2F;deconvnet.PNG"><link rel="canonical" href="https://www.zhujian.tech/posts/3f18ad9b.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,isPage:!1,isArchive:!1}</script><title>可视化理解卷积神经网络 | 做一个幸福的人</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?e677aac1ac69b8826b9cfecb4e72e107";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">做一个幸福的人</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">面朝大海，春暖花开</p></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签<span class="badge">129</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类<span class="badge">48</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档<span class="badge">169</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header> <a href="https://github.com/zjZSTU" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.zhujian.tech/posts/3f18ad9b.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="zhujian"><meta itemprop="description" content="one bite at a time"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="做一个幸福的人"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> 可视化理解卷积神经网络</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-06-08 14:20:19" itemprop="dateCreated datePublished" datetime="2019-06-08T14:20:19+00:00">2019-06-08</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-02-15 05:36:35" itemprop="dateModified" datetime="2020-02-15T05:36:35+00:00">2020-02-15</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/algorithm/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/algorithm/deep-learning/" itemprop="url" rel="index"><span itemprop="name">深度学习</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>3.9k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>6 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>参考：</p><p><a href="https://blog.csdn.net/hjimce/article/details/50544370" target="_blank" rel="noopener">可视化理解卷积神经网络</a></p><p><a href="https://zhuanlan.zhihu.com/p/24833574" target="_blank" rel="noopener">Deep Visualization:可视化并理解CNN</a></p><p>文章<a href="https://arxiv.org/abs/1311.2901" target="_blank" rel="noopener">Visualizing and Understanding Convolutional Networks</a>提出一种可视化方法来观察中间层特征，以此发现不同模型层的性能分布，调整<code>AlexNet</code>参数的得到的<code>ZFNet</code>模型在<code>ImageNet</code>上得到了更好的分类性能；通过预训练<code>ImageNet</code>模型测试发现预训练大数据库能够提高模型的泛化能力</p><a id="more"></a><h2 id="可视化技术"><a href="#可视化技术" class="headerlink" title="可视化技术"></a>可视化技术</h2><p>卷积神经网络能够很好的执行分类、识别、检测等功能，但是对于其中原理和变化过程一直没有很好的解释</p><p>文章设计一种可视化技术研究中间特征层和分类器的操作，总结不同模型层的特征贡献</p><p>主要探究以下两个问题：</p><ol><li>为什么大型卷积网络模型执行结果如此好？</li><li>它们怎么样可以提高？</li></ol><h3 id="多层反卷积网络"><a href="#多层反卷积网络" class="headerlink" title="多层反卷积网络"></a>多层反卷积网络</h3><p>可视化技术是通过多层反卷积网络（<code>Multi-Layered Deconvolutional Network, deconvnet</code>）实现的，其目的是<strong>反向映射中间特征层激活到原始像素空间</strong>（<code>map these activities back to the input pixel space</code>）</p><p>反卷积网络可以看成是一个卷积网络模型，同样拥有卷积、池化、激活等操作，区别在于其执行反向操作，将特征映射回像素，对应关系如下：</p><p><img src="/imgs/可视化理解卷积神经网络/deconvnet.PNG" alt></p><p>卷积网络模型和对应反卷积网络模型的前3层如上所示，卷积网络的每一层在反卷积网络中都有对应反向操作</p><p><strong>反卷积过程</strong>：卷积网络和反卷积网络每层一一对应</p><p>第一步：将数据输入到卷积网络，逐层计算特征</p><p>第二步：为探究中间特征层激活，选择其中一个激活图，选取其中响应最大的激活值，设置该层其他激活为<code>0</code>，输入特征到绑定的反卷积层</p><p>第三步：执行反池化、反激活、反卷积，重构上一层的激活区域</p><p>第四步：重复步骤<code>3</code>，直到回到输入像素空间</p><p><img src="/imgs/可视化理解卷积神经网络/figure-1.png" alt></p><p>完整的反卷积过程相当于反向传播梯度，区别在于：</p><ol><li>独立执行激活函数</li><li>不使用任何反向正则化操作</li></ol><h4 id="反池化"><a href="#反池化" class="headerlink" title="反池化"></a>反池化</h4><p>反池化（<code>unpool</code>）操作将激活区域反向映射到池化层输入向量的最大值坐标上</p><p>在前向最大池化层操作过程中，设置一个变量<code>switch</code>来记录最大值坐标，在反池化（<code>unpool</code>）操作时，将特征重新映射到最大值对应位置</p><h4 id="反激活"><a href="#反激活" class="headerlink" title="反激活"></a>反激活</h4><p>反激活操作和激活操作一样，使用对应激活层的激活函数即可，比如<code>relu</code>激活</p><h4 id="反卷积"><a href="#反卷积" class="headerlink" title="反卷积"></a>反卷积</h4><p>使用对应卷积层滤波器的转置版本（<code>transposed version</code>），即水平和垂直翻转滤波器</p><h2 id="特征分析"><a href="#特征分析" class="headerlink" title="特征分析"></a>特征分析</h2><h3 id="特征可视化"><a href="#特征可视化" class="headerlink" title="特征可视化"></a>特征可视化</h3><p>使用<code>AlexNe</code>t在<code>ImageNet</code>上训练完成后，选取特征图中前<code>9</code>个响应最大的激活点，反向卷积到输入像素空间</p><p><img src="/imgs/可视化理解卷积神经网络/figure_2-1.png" alt></p><p><img src="/imgs/可视化理解卷积神经网络/figure_2-2.png" alt></p><p>从图中可看出卷积网络特征演化过程</p><ol><li>第<code>2</code>层响应角（<code>corner</code>）和其他边缘/颜色连接（<code>edge/color conjunction</code>）</li><li>第<code>3</code>层有更复杂的不变性（<code>complex invariance</code>），能够捕捉相似的纹理</li><li>第<code>4</code>层更多显示的是基于类（<code>class-specific</code>）的不变性</li><li>第<code>5</code>层显示具有显著姿势变化（<code>pose variation</code>）的整个对象</li></ol><h3 id="特征演化"><a href="#特征演化" class="headerlink" title="特征演化"></a>特征演化</h3><p>下图演示了各层最强激活点所表示的对应特征在训练过程中的变化</p><p><img src="/imgs/可视化理解卷积神经网络/figure-3.png" alt></p><p>上图中每一行表示指定激活图中最强特征点在不同迭代次数下（<code>1/2/5/10/20/30/40/64</code>）的变化</p><p><strong>从图中可以看出，底层特征在最开始几轮就已经拟合，高层特征需要更多的迭代过程（<em>上图是40-50轮</em>）才开始拟合</strong></p><h3 id="特征不变性"><a href="#特征不变性" class="headerlink" title="特征不变性"></a>特征不变性</h3><p>下图采样了<code>5</code>张图像，分别进行不同程度的平移（<code>translated</code>）、旋转（<code>rotated</code>）和缩放（<code>scaled</code>），观察其特征向量的变化</p><p><img src="/imgs/可视化理解卷积神经网络/figure-4.png" alt></p><p>模型对平移和缩放的不变性最好，也能够很好的支持旋转，除非是旋转对称的对象</p><h3 id="敏感度分析"><a href="#敏感度分析" class="headerlink" title="敏感度分析"></a>敏感度分析</h3><p>执行一个遮蔽敏感性（<code>Occlusion Sensitivity</code>）分析，通过遮掩输入图像的部分区域，揭示哪部分场景对于分类而言是重要的</p><p>文章图<code>7</code>给出了示例，<em>不过我没看懂，它的示例图像比较乱</em>，总结起来有以下两点：</p><ol><li>分类结果依赖于图像中的对象而不是图像对象的上下文环境</li><li>当原始图像中对应于激活部分被遮掩时，可以看到特征图中明显的活动下降</li></ol><h3 id="一致性分析"><a href="#一致性分析" class="headerlink" title="一致性分析"></a>一致性分析</h3><p>深度模型（<code>deep model</code>）没有显式建立特定对象部分之间的对应关系（比如脸部中的眼睛、鼻子），文章通过实验测试深度模型是否会隐式建立不同图像特定目标之间的对应关系</p><p><img src="/imgs/可视化理解卷积神经网络/figure_6.png" alt></p><p>随机选择<code>5</code>张不同的狗脸图像，遮掩住脸部同一区域进行比对（比如都遮掩住右眼）</p><p>首先计算原始图像和遮掩后的图像误差</p><script type="math/tex;mode=display">
\epsilon_{i}^{(l)} = x_{i}^{(l)} - \tilde{x}_{i}^{(l)}</script><p>$x_{i}^{(l)}$和$\tilde{x}_{i}^{(l)}$分别是原始图像和遮掩图像第第$l$层的特征向量</p><p>然后计算不同误差之间的一致性</p><script type="math/tex;mode=display">
\triangle_{l} = \sum_{i,j=1,i\neq j}^{5} H(sign(\epsilon_{i}^{(l)}), sign(\epsilon_{j}^{(l)}))</script><p>$H$指<a href="https://baike.baidu.com/item/%E6%B1%89%E6%98%8E%E8%B7%9D%E7%A6%BB" target="_blank" rel="noopener">汉明距离（Hamming Distance）</a>，更低的值表明更大的一致性</p><p>文章共比较了第<code>5</code>层和第<code>7</code>层的特征，遮掩了左眼、右眼、鼻子和随机部分，结果如下</p><p><img src="/imgs/可视化理解卷积神经网络/table_1.png" alt></p><p>相对于随机遮掩的结果，遮掩指定脸部区域能够得到更小的值，表明模型确实建立了一定程度的对应关系</p><h2 id="ZFNet"><a href="#ZFNet" class="headerlink" title="ZFNet"></a>ZFNet</h2><h3 id="AlexNet模型分析"><a href="#AlexNet模型分析" class="headerlink" title="AlexNet模型分析"></a>AlexNet模型分析</h3><p>可视化<code>AlexNet</code>第一和第二卷积层如下</p><p><img src="/imgs/可视化理解卷积神经网络/figure-5.png" alt></p><p>第一层特征可视化显示滤波器采集的是极度高频和低频（<code>extremely high and low frequency</code>）的图像信息，很少涉及中频（<code>the mid frequencies</code>）信息（图b）</p><p>第二层可视化显示了第一层卷积中使用的大步长导致的混淆现象（<code>aliasing artifacts</code>）（图d）</p><p>调整第一个卷积层参数</p><ol><li>滤波器大小：<code>11 -&gt; 7</code></li><li>滤波器步长：<code>4 -&gt; 2</code></li></ol><p>结果如图<code>c/e</code>所示，第一、二层能够得到更多的信息，能够进一步提高检测能力</p><h4 id="高频、中频和低频信息"><a href="#高频、中频和低频信息" class="headerlink" title="高频、中频和低频信息"></a>高频、中频和低频信息</h4><p>参考：</p><p><a href="https://www.hhyz.me/2018/06/22/2018-06-22-cv2/" target="_blank" rel="noopener">计算机视觉基础</a></p><p><a href="https://stonema.github.io/2018/04/24/%E9%AB%98%E9%A2%91%E4%BF%A1%E5%8F%B7%E4%B8%8E%E4%BD%8E%E9%A2%91%E4%BF%A1%E5%8F%B7-%E5%9B%BE%E5%83%8F%E9%94%90%E5%8C%96%E4%B8%8E%E6%A8%A1%E7%B3%8A/" target="_blank" rel="noopener">高频信号与低频信号,图像锐化与模糊</a></p><p><a href="http://blog.sina.com.cn/s/blog_a98e39a201012hpp.html" target="_blank" rel="noopener">图像频率的理解</a></p><p>灰度变化慢的是低频信息，是图像颜色渐变区域；灰度变化快的是高频信息，比如图像边缘轮廓和噪声；夹在中间的是中频信息</p><p>中频信息确定了图像基本轮廓结构，高频信息强化对轮廓的细节，低频信息补充了轮廓的内容</p><h3 id="ZFNet模型"><a href="#ZFNet模型" class="headerlink" title="ZFNet模型"></a>ZFNet模型</h3><p>通过分析<code>AlexNet</code>模型，修改第一二卷积层的模型参数，得到<code>ZFNet</code>模型</p><ul><li>第一层的滤波器大小修改为7x7</li><li>第一和第二个卷积层的步长修改为2</li></ul><p><img src="/imgs/可视化理解卷积神经网络/ZFNet.png" alt></p><h4 id="ZFNet性能分析"><a href="#ZFNet性能分析" class="headerlink" title="ZFNet性能分析"></a>ZFNet性能分析</h4><p>文章使用<code>ImageNet 2011</code>和<code>2012</code>训练集，使用<code>AlexNet</code>和<code>ZFNet</code>模型，比较单个网络和集成多个网络平均结果的性能</p><p><img src="/imgs/可视化理解卷积神经网络/training_result.png" alt></p><ul><li>ZFNet模型比AlexNet模型实现更好的结果（<code>(Krizhevsky et al., 2012), 1 convnet</code> vs <code>1 convnet as per Fig. 3</code>）</li><li>集成多个<code>ZFNet</code>模型能够实现更好的结果（<code>6 convnets, (a) &amp; (b) combined</code>）</li></ul><h2 id="网络大小分析"><a href="#网络大小分析" class="headerlink" title="网络大小分析"></a>网络大小分析</h2><p>文章对<code>AlexNet</code>和<code>ZFNet</code>进行中间层移除和修改实验，<strong>表明模型的整体深度对于获得良好的性能很重要</strong></p><p><img src="/imgs/可视化理解卷积神经网络/table_2.png" alt></p><ul><li>删除<code>AlexNet</code>卷积层或全连接层会提高误差率</li><li>增大<code>ZFNet</code>卷积层或全连接层能够减少误差率</li></ul><h2 id="模型泛化"><a href="#模型泛化" class="headerlink" title="模型泛化"></a>模型泛化</h2><p>文章利用<code>ImageNet</code>训练<code>ZFNet</code>模型，然后保持<code>1-7</code>层模型参数，使用其他数据库重新训练<code>softmax</code>分类器，表明在卷积层中学习到的特性有很好的迁移能力</p><h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><ul><li><a href="http://image-net.org/index" target="_blank" rel="noopener">ImageNet</a>：超过1百万张图像和超过1000个类</li><li><a href="http://www.vision.caltech.edu/Image_Datasets/Caltech101/" target="_blank" rel="noopener">Caltech 101</a>：共有101类，每类40-800张</li><li><a href="http://www.vision.caltech.edu/Image_Datasets/Caltech256/" target="_blank" rel="noopener">Caltech 256</a>：共256类，每类80-827张</li><li><a href="http://host.robots.ox.ac.uk/pascal/VOC/" target="_blank" rel="noopener">Pascal VOC</a>：多目标图像</li></ul><h3 id="比较方式"><a href="#比较方式" class="headerlink" title="比较方式"></a>比较方式</h3><p>比较两个方面</p><ul><li>保证<code>1-7</code>层参数不变，仅重训练<code>softmax</code>分类器和初始化所有层参数，重新训练分类器的比较</li><li><code>ZFNet</code>模型和之前最好检测结果比较</li></ul><h3 id="比较结果"><a href="#比较结果" class="headerlink" title="比较结果"></a>比较结果</h3><p>在<code>Caltech-101</code>和<code>Caltech-256</code>数据库上，使用预训练模型能够达到最好的检测结果，重训练模型实现精度远远不及之前最好检测结果</p><p><img src="/imgs/可视化理解卷积神经网络/table_3.png" alt></p><p><img src="/imgs/可视化理解卷积神经网络/table_4.png" alt></p><ol><li><strong>利用<code>ImageNet</code>训练的特征提取器的强大性能</strong></li><li><strong>小数据集无法提高深度模型检测能力</strong></li></ol><p>在<code>PASCAL-2012</code>数据集上进行训练和测试发现，使用预训练模型无法实现理想的效果</p><p><strong>理由：<code>PASCAL</code>数据库（多目标）和<code>ImageNet</code>数据库（单目标）的使用场景不一致。在包含多对象的图像中进行检测，基于<code>ImageNet</code>预训练的分类器不适用</strong></p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>本文提出的可视化技术有以下<strong>优点</strong>：</p><ol><li>能够帮助我们观察到特征在训练过程中的演化以及诊断模型潜在的问题，说明特征是可理解的</li><li>通过平移、旋转和缩放实验表明模型在对象变化过程中对平移和旋转有很好的鲁棒性，对缩放也有一定的不变性</li><li>通过一系列的遮挡实验证明模型在经过分类训练后，对图像中的局部结构高度敏感，而不是依赖于场景上下文</li></ol><p><strong>可视化技术缺点</strong>在于仅可视化单个激活，不涉及多层激活图之间的连接</p><p>通过可视化技术的应用有以下发现：</p><ol><li>大滤波器缺少对中频信息（图像基本结构）的采集</li><li>大步长会导致特征混淆现象</li><li>底层特征在训练过程中易于收敛，高层特征需要更多轮迭代才能完成</li><li>特征的演化经历从细节到整体的过程</li></ol><p>对<code>AlexNet</code>模型的第一二层卷积层减小滤波器大小和步长，得到的<code>ZFNet</code>模型在<code>ImageNet</code>数据集上有更好的性能</p><p>通过调整模型大小和层数发现：</p><ol><li>模型架构深度有助于性能提升</li><li>改变全连接层大小对性能影响不大</li><li>增加中间隐藏层的大小有助于性能提升</li><li>同时扩大隐藏层和全连接层会导致过拟合</li><li>多模型集成有助于提高性能</li></ol><p>通过多数据库训练和测试发现：</p><ol><li>大数据集有助于提高深度模型检测能力和泛化能力</li><li>不同场景数据集复用效果不强</li></ol><p>通过对以上内容的分析，下面的方向是未来模型性能提高的方向</p><ol><li>更大的数据库</li><li>更深更大的网络模型<br>2.1 更好的模型归一化策略<br>2.2 小的滤波器大小和步长</li></ol></div><div class="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';"> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="/images/wechatpay.jpg" alt="zhujian 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="/images/alipay.jpg" alt="zhujian 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> zhujian</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.zhujian.tech/posts/3f18ad9b.html" title="可视化理解卷积神经网络">https://www.zhujian.tech/posts/3f18ad9b.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/ZFNet/" rel="tag"># ZFNet</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/posts/ba337bfa.html" rel="next" title="AlexNet-pytorch"><i class="fa fa-chevron-left"></i> AlexNet-pytorch</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/posts/359ae103.html" rel="prev" title="NIN">NIN<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments" id="gitalk-container"></div></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#可视化技术"><span class="nav-number">1.</span> <span class="nav-text">可视化技术</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#多层反卷积网络"><span class="nav-number">1.1.</span> <span class="nav-text">多层反卷积网络</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#反池化"><span class="nav-number">1.1.1.</span> <span class="nav-text">反池化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#反激活"><span class="nav-number">1.1.2.</span> <span class="nav-text">反激活</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#反卷积"><span class="nav-number">1.1.3.</span> <span class="nav-text">反卷积</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#特征分析"><span class="nav-number">2.</span> <span class="nav-text">特征分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特征可视化"><span class="nav-number">2.1.</span> <span class="nav-text">特征可视化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#特征演化"><span class="nav-number">2.2.</span> <span class="nav-text">特征演化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#特征不变性"><span class="nav-number">2.3.</span> <span class="nav-text">特征不变性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#敏感度分析"><span class="nav-number">2.4.</span> <span class="nav-text">敏感度分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一致性分析"><span class="nav-number">2.5.</span> <span class="nav-text">一致性分析</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ZFNet"><span class="nav-number">3.</span> <span class="nav-text">ZFNet</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#AlexNet模型分析"><span class="nav-number">3.1.</span> <span class="nav-text">AlexNet模型分析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#高频、中频和低频信息"><span class="nav-number">3.1.1.</span> <span class="nav-text">高频、中频和低频信息</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ZFNet模型"><span class="nav-number">3.2.</span> <span class="nav-text">ZFNet模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ZFNet性能分析"><span class="nav-number">3.2.1.</span> <span class="nav-text">ZFNet性能分析</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#网络大小分析"><span class="nav-number">4.</span> <span class="nav-text">网络大小分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模型泛化"><span class="nav-number">5.</span> <span class="nav-text">模型泛化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数据库"><span class="nav-number">5.1.</span> <span class="nav-text">数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#比较方式"><span class="nav-number">5.2.</span> <span class="nav-text">比较方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#比较结果"><span class="nav-number">5.3.</span> <span class="nav-text">比较结果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#小结"><span class="nav-number">6.</span> <span class="nav-text">小结</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="zhujian" src="/images/avatar.png"><p class="site-author-name" itemprop="name">zhujian</p><div class="site-description" itemprop="description">one bite at a time</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">169</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">48</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">129</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="feed-link motion-element"><a href="/./atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/zjZSTU" title="Github &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;zjZSTU" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a></span><span class="links-of-author-item"><a href="https://blog.csdn.net/u012005313" title="CSDN &amp;rarr; https:&#x2F;&#x2F;blog.csdn.net&#x2F;u012005313" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i> CSDN</a></span><span class="links-of-author-item"><a href="/mailto:zjzstu@gmail.com" title="Gmail &amp;rarr; mailto:zjzstu@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> Gmail</a></span><span class="links-of-author-item"><a href="/mailto:505169307@gmail.com" title="QQmail &amp;rarr; mailto:505169307@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> QQmail</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://cloud.tencent.com/" title="https:&#x2F;&#x2F;cloud.tencent.com" rel="noopener" target="_blank">腾讯云</a></li><li class="links-of-blogroll-item"> <a href="https://www.aliyun.com/" title="https:&#x2F;&#x2F;www.aliyun.com" rel="noopener" target="_blank">阿里云</a></li><li class="links-of-blogroll-item"> <a href="https://developer.android.com/" title="https:&#x2F;&#x2F;developer.android.com&#x2F;" rel="noopener" target="_blank">Android Dev</a></li><li class="links-of-blogroll-item"> <a href="https://jenkins.io/" title="https:&#x2F;&#x2F;jenkins.io&#x2F;" rel="noopener" target="_blank">Jenkins</a></li><li class="links-of-blogroll-item"> <a href="http://cs231n.github.io/" title="http:&#x2F;&#x2F;cs231n.github.io&#x2F;" rel="noopener" target="_blank">cs231n</a></li><li class="links-of-blogroll-item"> <a href="https://pytorch.org/docs/stable/index.html" title="https:&#x2F;&#x2F;pytorch.org&#x2F;docs&#x2F;stable&#x2F;index.html" rel="noopener" target="_blank">pytorch</a></li><li class="links-of-blogroll-item"> <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" title="https:&#x2F;&#x2F;docs.docker.com&#x2F;install&#x2F;linux&#x2F;docker-ce&#x2F;ubuntu&#x2F;" rel="noopener" target="_blank">docker</a></li></ul></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">zhujian</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">948k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">26:20</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-bar-chart-o"></i></span> <a href="https://tongji.baidu.com/web/27249108/overview/index?siteId=13647183" rel="noopener" target="_blank">百度统计</a></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.5.0</div><div class="beian"> <a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">浙ICP备 19026415号</a> <span class="post-meta-divider">|</span> <img src="/images/beian_icon.png" style="display:inline-block;text-decoration:none;height:13px"> <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33011802001748" rel="noopener" target="_blank">浙公网安备 33011802001748号</a></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span> <span class="site-uv" title="总访客量">访客数：<span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="site-pv" title="总访问量">阅读量：<span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script color="17,63,61" opacity="1" zindex="-1" count="199" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script><script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '8f22595c6dd29c94467d',
      clientSecret: 'e66bd90ebb9aa66c562c753dec6c90ceecbd51f2',
      repo: 'guestbook',
      owner: 'zjZSTU',
      admin: ['zjZSTU'],
      id: '76ed6d5498143d46d2e28bfb4841073e',
        language: '',
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script></body></html>