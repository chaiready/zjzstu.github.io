<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="alternate" href="/./atom.xml" title="做一个幸福的人" type="application/atom+xml"><meta name="google-site-verification" content="Qr_3yqLtyErDFKHW7mE8PJz4qDUX-bf_fMLpSRckQe4"><meta name="baidu-site-verification" content="zOwIvKMV7f"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Roboto:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-center-atom.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"7.5.0",exturl:!1,sidebar:{position:"left",display:"post",offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"搜索文章",hits_empty:"我们没有找到任何搜索结果: ${query}",hits_stats:"找到约${hits}条结果（用时${time}ms）"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},translation:{copy_button:"复制",copy_success:"复制成功",copy_failure:"复制失败"},sidebarPadding:40}</script><link href="https://fonts.googleapis.com/css?family=Noto+Serif+SC|Roboto&display=swap" rel="stylesheet"><meta name="description" content="在进行图像分割之前通常会使用滤波器进行平滑操作，其目的是消除高斯噪声的影响。学习高斯噪声&#x2F;高斯滤波的相关概念并实现高斯滤波器"><meta name="keywords" content="c++,python,opencv,卷积,numpy,matplotlib,高斯滤波"><meta property="og:type" content="article"><meta property="og:title" content="高斯滤波"><meta property="og:url" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;posts&#x2F;80b530f2.html"><meta property="og:site_name" content="做一个幸福的人"><meta property="og:description" content="在进行图像分割之前通常会使用滤波器进行平滑操作，其目的是消除高斯噪声的影响。学习高斯噪声&#x2F;高斯滤波的相关概念并实现高斯滤波器"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;高斯滤波&#x2F;gauss_1d.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;高斯滤波&#x2F;gauss-2d.png"><meta property="og:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;高斯滤波&#x2F;gauss-common.png"><meta property="og:updated_time" content="2020-02-15T05:36:35.879Z"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https:&#x2F;&#x2F;www.zhujian.tech&#x2F;imgs&#x2F;高斯滤波&#x2F;gauss_1d.png"><link rel="canonical" href="https://www.zhujian.tech/posts/80b530f2.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,isPage:!1,isArchive:!1}</script><title>高斯滤波 | 做一个幸福的人</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?e677aac1ac69b8826b9cfecb4e72e107";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">做一个幸福的人</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">面朝大海，春暖花开</p></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签<span class="badge">129</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类<span class="badge">48</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档<span class="badge">169</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header> <a href="https://github.com/zjZSTU" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.zhujian.tech/posts/80b530f2.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="zhujian"><meta itemprop="description" content="one bite at a time"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="做一个幸福的人"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> 高斯滤波</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-08-12 18:49:24" itemprop="dateCreated datePublished" datetime="2019-08-12T18:49:24+00:00">2019-08-12</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-02-15 05:36:35" itemprop="dateModified" datetime="2020-02-15T05:36:35+00:00">2020-02-15</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/algorithm/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/algorithm/image-process/" itemprop="url" rel="index"><span itemprop="name">图像处理</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming/programming-language/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/algorithm/image-process/image-filter/" itemprop="url" rel="index"><span itemprop="name">图像滤波</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming/codebase/" itemprop="url" rel="index"><span itemprop="name">代码库</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>14k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>23 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>在进行图像分割之前通常会使用滤波器进行平滑操作，其目的是消除高斯噪声的影响。学习高斯噪声/高斯滤波的相关概念并实现高斯滤波器</p><a id="more"></a><h2 id="高斯分布"><a href="#高斯分布" class="headerlink" title="高斯分布"></a>高斯分布</h2><p>参考：</p><p><a href="https://www.zhihu.com/question/54918332" target="_blank" rel="noopener">高斯模糊的原理是什么，怎样在界面中实现？</a></p><p><a href="https://www.zhujian.tech/posts/6824c6e3.html">正态分布</a></p><p><a href="https://zj-image-processing.readthedocs.io/zh_CN/latest/matplotlib/3d%E7%BB%98%E5%9B%BE.html" target="_blank" rel="noopener">3d绘图</a></p><p>一维高斯分布</p><script type="math/tex;mode=display">
G(x) = \frac {1}{\sqrt {2 \pi} \sigma} e^{-\frac {x^{2}}{2\sigma^{2}}}</script><p>二维高斯分布</p><script type="math/tex;mode=display">
G(x, y) = \frac {1}{2 \pi \sigma^{2}} e^{-\frac {x^{2} + y^{2}}{2\sigma^{2}}}</script><p>每次计算均以当前像素点为中心，所以均值$\mu$为$0$</p><p>标准差$\sigma$控制离散程度，$\sigma$越大，曲线越扁平，数据分布越离散，滤波效果越明显；$\sigma$越小，曲线越廋高，数据分布越集中，滤波效果不明显</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line"># @Time    : 19-8-12 下午7:19</span><br><span class="line"># @Author  : zj</span><br><span class="line"></span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from mpl_toolkits.mplot3d import Axes3D</span><br><span class="line">import numpy as np</span><br><span class="line">import math</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def gauss_filter_1d(x, sigma=1.):</span><br><span class="line">    w = 1 / (np.sqrt(2 * math.pi) * sigma)</span><br><span class="line">    return np.exp(-1 * x ** 2 / (sigma ** 2 * 2)) * w</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def gauss_filter_2d(x, y, sigma=1.):</span><br><span class="line">    w = 1 / (2 * math.pi * sigma ** 2)</span><br><span class="line">    return np.exp(-1 * (x ** 2 + y ** 2) / (sigma ** 2 * 2)) * w</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    x = np.linspace(-3, 3, num=50)</span><br><span class="line">    y = np.linspace(-3, 3, num=50)</span><br><span class="line"></span><br><span class="line">    X, Y = np.meshgrid(x, y)</span><br><span class="line">    Z = gauss_filter_2d(X, Y, sigma=0.8)</span><br><span class="line"></span><br><span class="line">    fig = plt.figure(1)</span><br><span class="line">    ax = fig.add_subplot(111, projection=&apos;3d&apos;)</span><br><span class="line">    surf = ax.plot_surface(X, Y, Z, cmap=plt.cm.coolwarm)</span><br><span class="line">    fig.colorbar(surf, shrink=0.5, aspect=5)</span><br><span class="line"></span><br><span class="line">    fig = plt.figure(2)</span><br><span class="line">    res = gauss_filter_1d(x, sigma=1)</span><br><span class="line">    plt.scatter(x, res, label=&apos;sigma=1&apos;)</span><br><span class="line">    res = gauss_filter_1d(x, sigma=0.8)</span><br><span class="line">    plt.scatter(x, res, label=&apos;sigma=0.8&apos;)</span><br><span class="line">    res = gauss_filter_1d(x, sigma=0.5)</span><br><span class="line">    plt.scatter(x, res, label=&apos;sigma=0.5&apos;)</span><br><span class="line">    plt.legend()</span><br><span class="line"></span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure><p><img src="/imgs/高斯滤波/gauss_1d.png" alt></p><p><img src="/imgs/高斯滤波/gauss-2d.png" alt></p><h2 id="高斯噪声"><a href="#高斯噪声" class="headerlink" title="高斯噪声"></a>高斯噪声</h2><p>参考：<a href="https://baike.baidu.com/item/%E9%AB%98%E6%96%AF%E5%99%AA%E5%A3%B0" target="_blank" rel="noopener">高斯噪声</a></p><p>高斯噪声是指它的概率密度函数服从高斯分布（即正态分布）的一类噪声</p><p>数字图像中的高斯噪声的主要来源出现在采集期间，由于不良照明/高温引起的<strong>传感器噪声</strong></p><h2 id="高斯滤波"><a href="#高斯滤波" class="headerlink" title="高斯滤波"></a>高斯滤波</h2><p>高斯滤波（<code>gaussian filter</code>）是一种<strong>线性平滑滤波</strong>，就是对整幅图像进行<strong>加权平均</strong>的过程，对每个像素点的值，结合邻域内其他像素值进行加权平均</p><p>具体操作如下：用一个模板（或称卷积、掩模）扫描图像中的每一个像素，用模板确定的邻域像素的加权平均灰度值去替代模板中心像素点的值</p><p>高斯滤波的优点在于消除高斯噪声，其副作用是消除图像细节，所以又称为高斯模糊（<code>gaussian blur</code>）</p><h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><p>参考：<a href="https://blog.csdn.net/lz0499/article/details/54015150" target="_blank" rel="noopener">关于高斯滤波的一些理解</a></p><p>有两个常用的高斯模板，分别是$3\times 3$和$5\times 5$大小</p><p><img src="/imgs/高斯滤波/gauss-common.png" alt></p><p>滤波过程中的模板是通过高斯公式计算得到的，以$3\times 3$大小模板为例，其原始值是</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[2 1 2]</span><br><span class="line"> [1 0 1]</span><br><span class="line"> [2 1 2]]</span><br></pre></td></tr></table></figure><p>假定$\sigma=0.85$，输入到二维高斯函数计算得到</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[0.11759572 0.23493154 0.11759572]</span><br><span class="line"> [0.23493154 0.46934386 0.23493154]</span><br><span class="line"> [0.11759572 0.23493154 0.11759572]]</span><br></pre></td></tr></table></figure><p>进行归一化</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[0.06256912 0.12499996 0.06256912]</span><br><span class="line"> [0.12499996 0.24972366 0.12499996]</span><br><span class="line"> [0.06256912 0.12499996 0.06256912]]</span><br></pre></td></tr></table></figure><p>除以最小值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[1 2 1]</span><br><span class="line"> [2 4 2]</span><br><span class="line"> [1 2 1]]</span><br></pre></td></tr></table></figure><p>$5\times 5$大小模板同理，不过其$\sigma$约为$1.04$</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    x = 5</span><br><span class="line">    y = 5</span><br><span class="line">    sigma = 1.04</span><br><span class="line"></span><br><span class="line">    xx = np.abs(np.arange(-1 * (x // 2), x // 2 + 1))</span><br><span class="line">    yy = np.abs(np.arange(-1 * (y // 2), y // 2 + 1))</span><br><span class="line"></span><br><span class="line">    xx, yy = np.meshgrid(xx, yy)</span><br><span class="line">    print(xx ** 2 + yy ** 2)</span><br><span class="line">    zz = gauss_filter_2d(xx, yy, sigma=sigma)</span><br><span class="line"></span><br><span class="line">    print(zz)</span><br><span class="line">    print(zz / np.sum(zz))</span><br><span class="line">    print((zz / np.min(zz) + 0.5).astype(np.int))</span><br></pre></td></tr></table></figure><h3 id="彩色图像"><a href="#彩色图像" class="headerlink" title="彩色图像"></a>彩色图像</h3><p>高斯滤波默认对单个通道图像进行，所以对于彩色图像，需要先分离为<code>3</code>个单通道图像，分别进行滤波处理后再合并为<code>3</code>通道图像</p><h2 id="opencv实现"><a href="#opencv实现" class="headerlink" title="opencv实现"></a>opencv实现</h2><p>参考：</p><p><a href="https://docs.opencv.org/3.4.2/d4/dbd/Smoothing_8cpp-example.html#a10" target="_blank" rel="noopener">Smoothing.cpp</a></p><p><a href="https://docs.opencv.org/3.4.2/d4/d13/tutorial_py_filtering.html" target="_blank" rel="noopener">Gaussian Blurring</a></p><p><code>opencv</code>提供了高斯滤波以及高斯模板的实现</p><p>源码位于：<code>path/to/modules/imgproc/src/smooth.cpp</code></p><h3 id="getGaussianKernel"><a href="#getGaussianKernel" class="headerlink" title="getGaussianKernel"></a>getGaussianKernel</h3><p>函数<a href="https://docs.opencv.org/3.4.2/d4/d86/group__imgproc__filter.html#gac05a120c1ae92a6060dd0db190a61afa" target="_blank" rel="noopener">getGaussianKernel()</a>计算并返回高斯滤波系数的$ksize×1$大小矩阵：</p><script type="math/tex;mode=display">
G_{i} = \alpha * e^{-(i-(ksize-1)/2)^{2}/(2*sigma^{2})}</script><ul><li>参数$ksize$应该是正奇数（<code>1/3/5/...</code>），如果输入为<code>0</code>（即<code>Size(0,0)</code>），则根据<code>sigma</code>值进行计算</li><li>参数$\sigma$是高斯标准差，如果输入不为正，根据<code>ksize</code>计算$sigma = 0.3*((ksize-1)\cdot 0.5 - 1)+0.8$，当<code>ksize=3, sigma=0.8</code>，当<code>ksize=5, sigma=1.1</code></li><li>参数$i$遍历$0,…,ksize-1$</li><li>参数$\alpha$是缩放因子，其目的是使矩阵归一化：$\sum_{i}G_{i} = 1$</li></ul><p><code>getGaussianKernel</code>源码位于<code>/path/to/modules/imgproc/src/smooth.cpp</code></p><p>当<code>ksize=Size(0,0)</code>时，计算如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// automatic detection of kernel size from sigma</span><br><span class="line">if( ksize.width &lt;= 0 &amp;&amp; sigma1 &gt; 0 )</span><br><span class="line">    ksize.width = cvRound(sigma1*(depth == CV_8U ? 3 : 4)*2 + 1)|1;</span><br><span class="line">if( ksize.height &lt;= 0 &amp;&amp; sigma2 &gt; 0 )</span><br><span class="line">    ksize.height = cvRound(sigma2*(depth == CV_8U ? 3 : 4)*2 + 1)|1;</span><br></pre></td></tr></table></figure><ul><li>当<code>sigma=1.0</code>时，<code>ksize.width = cvRound(7)|1 = 0111|1 = 0111 = 7</code></li><li>当<code>sigma=0.8</code>时，<code>ksize.width = cvRound(5.8)|1 = 6|1 = 0110|1 = 0111 = 7</code></li><li>当<code>sigma=0.5</code>时，<code>ksize.width = cvRound(4)|1 = 0100|1 = 0101 = 5</code></li></ul><h3 id="GaussianBlur"><a href="#GaussianBlur" class="headerlink" title="GaussianBlur"></a>GaussianBlur</h3><p>函数<a href="https://docs.opencv.org/3.4.2/d4/d86/group__imgproc__filter.html#gaabe8c836e97159a9193fb0b11ac52cf1" target="_blank" rel="noopener">GaussianBlur()</a>将源图像与高斯核进行卷积操作</p><p>使用$(5,5)$大小，$sigma=1$的高斯核进行卷积操作</p><p>python语言</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(&apos;lena.jpg&apos;)</span><br><span class="line">blur = cv2.GaussianBlur(img, (5, 5), 1)</span><br><span class="line">cv2.imshow(&apos;img&apos;, img)</span><br><span class="line">cv2.imshow(&apos;blur&apos;, blur)</span><br><span class="line">cv2.waitKey(0)</span><br></pre></td></tr></table></figure><p>C++语言</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;opencv2/opencv.hpp&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line">using namespace cv;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    std::cout &lt;&lt; &quot;Hello, World!&quot; &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    Mat img = imread(&quot;lena.jpg&quot;);</span><br><span class="line">    if (img.empty()) &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;error&quot; &lt;&lt; std::endl;</span><br><span class="line">        exit(0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Mat dst = img.clone();</span><br><span class="line">    GaussianBlur(img, dst, Size(5, 5), 1, 1);</span><br><span class="line"></span><br><span class="line">    imshow(&quot;img&quot;, img);</span><br><span class="line">    imshow(&quot;gauss&quot;, dst);</span><br><span class="line">    waitKey(0);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自定义实现（c-）"><a href="#自定义实现（c-）" class="headerlink" title="自定义实现（c++）"></a>自定义实现（c++）</h2><p>创建类<code>GaussianFilter</code>，实现获取高斯滤波功能</p><ol><li>使用<code>gaussFilter2d</code>实现高斯分布计算（去掉<code>weight</code>计算，其在归一化过程中不需要）</li><li>使用<code>Conv2d</code>实现卷积核与图像计算</li><li>使用<code>getGaussianKernel</code>计算高斯模板</li><li>使用<code>GaussianBlur</code>进行高斯滤波</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">// Created by zj on 19-8-13.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#ifndef OPENCV_PROJECT_GAUSSIANFILTER_H</span><br><span class="line">#define OPENCV_PROJECT_GAUSSIANFILTER_H</span><br><span class="line"></span><br><span class="line">#include &lt;cmath&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;opencv2/opencv.hpp&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line">using namespace cv;</span><br><span class="line"></span><br><span class="line">class GaussianFilter &#123;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    /**</span><br><span class="line">     * 高斯滤波操作</span><br><span class="line">     */</span><br><span class="line">    void GaussianBlur(Mat &amp;src, Mat &amp;dst, int ksize = 3, double sigma = 1.0);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 生成二维高斯滤波内核</span><br><span class="line">     */</span><br><span class="line">    Mat getGaussianKernel(int ksize, double sigma);</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    /**</span><br><span class="line">     * 二维卷积操作</span><br><span class="line">     */</span><br><span class="line">    void Conv2d(Mat &amp;src, Mat &amp;dst, Mat filter);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 二维高斯滤波</span><br><span class="line">     */</span><br><span class="line">    double gaussFilter2d(double x, double y, double sigma = 1.0);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#endif //OPENCV_PROJECT_GAUSSIANFILTER_H</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">// Created by zj on 19-8-13.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#include &quot;GaussianFilter.h&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void GaussianFilter::GaussianBlur(Mat &amp;src, Mat &amp;dst, int ksize, double sigma) &#123;</span><br><span class="line">    int channels = src.channels();</span><br><span class="line">    Mat filter = getGaussianKernel(ksize, sigma);</span><br><span class="line"></span><br><span class="line">    if (channels == 1) &#123;</span><br><span class="line">        Conv2d(src, dst, filter);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        vector&lt;Mat&gt; mats;</span><br><span class="line">        vector&lt;Mat&gt; dstMats;</span><br><span class="line">        split(src, mats);</span><br><span class="line">        for (auto srcImg: mats) &#123;</span><br><span class="line">            Mat dstImg = srcImg.clone();</span><br><span class="line"></span><br><span class="line">            Conv2d(srcImg, dstImg, filter);</span><br><span class="line">            dstMats.push_back(dstImg);</span><br><span class="line">        &#125;</span><br><span class="line">        merge(dstMats, dst);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Mat GaussianFilter::getGaussianKernel(int ksize, double sigma) &#123;</span><br><span class="line">    // ksize=3, sigma=0.85</span><br><span class="line">    // kszie=5, sigma=1.04</span><br><span class="line">    static const double gaussian_kernel_3[][3] = &#123;&#123;0.06256912, 0.12499996, 0.06256912&#125;,</span><br><span class="line">                                                  &#123;0.12499996, 0.24972366, 0.12499996&#125;,</span><br><span class="line">                                                  &#123;0.06256912, 0.12499996, 0.06256912&#125;&#125;;</span><br><span class="line">    static const double gaussian_kernel_5[][5] = &#123;</span><br><span class="line">            &#123;0.00373691, 0.0149557, 0.023745,  0.0149557, 0.00373691&#125;,</span><br><span class="line">            &#123;0.0149557,  0.0598552, 0.0950314, 0.0598552, 0.0149557&#125;,</span><br><span class="line">            &#123;0.023745,   0.0950314, 0.15088,   0.0950314, 0.023745&#125;,</span><br><span class="line">            &#123;0.0149557,  0.0598552, 0.0950314, 0.0598552, 0.0149557&#125;,</span><br><span class="line">            &#123;0.00373691, 0.0149557, 0.023745,  0.0149557, 0.00373691&#125;,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    Mat res;</span><br><span class="line">    if (ksize == 3) &#123;</span><br><span class="line">        res = Mat(ksize, ksize, CV_64FC1);</span><br><span class="line">        std::memcpy(res.data, gaussian_kernel_3, ksize * ksize * sizeof(double));</span><br><span class="line">    &#125; else if (ksize == 5) &#123;</span><br><span class="line">        res = Mat(ksize, ksize, CV_64FC1);</span><br><span class="line">        std::memcpy(res.data, gaussian_kernel_5, ksize * ksize * sizeof(double));</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        double kernel[ksize][ksize];</span><br><span class="line">        int radius = ksize / 2;</span><br><span class="line">        double sum = 0;</span><br><span class="line"></span><br><span class="line">        for (int i = 0; i &lt; ksize; i++) &#123;</span><br><span class="line">            for (int j = 0; j &lt; ksize; j++) &#123;</span><br><span class="line">                kernel[i][j] = gaussFilter2d(abs(i - radius), abs(j - radius), sigma);</span><br><span class="line">                sum += kernel[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        for (int i = 0; i &lt; ksize; i++) &#123;</span><br><span class="line">            for (int j = 0; j &lt; ksize; j++) &#123;</span><br><span class="line">                kernel[i][j] = kernel[i][j] / sum;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        res = Mat(ksize, ksize, CV_64FC1);</span><br><span class="line">        std::memcpy(res.data, kernel, ksize * ksize * sizeof(double));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void GaussianFilter::Conv2d(Mat &amp;src, Mat &amp;dst, Mat filter) &#123;</span><br><span class="line">    int filter_h = filter.rows;</span><br><span class="line">    int filter_w = filter.cols;</span><br><span class="line"></span><br><span class="line">    int radius_y = filter_h / 2;</span><br><span class="line">    int radius_x = filter_w / 2;</span><br><span class="line"></span><br><span class="line">    int h = src.rows;</span><br><span class="line">    int w = src.cols;</span><br><span class="line"></span><br><span class="line">    double temp;</span><br><span class="line">    int target_x;</span><br><span class="line">    int target_y;</span><br><span class="line">    bool flag;</span><br><span class="line">    for (int i = 0; i &lt; h; i++) &#123;</span><br><span class="line">        auto *data = dst.ptr&lt;uchar&gt;(i);</span><br><span class="line">        for (int j = 0; j &lt; w; j++) &#123;</span><br><span class="line">            temp = 0;</span><br><span class="line">            for (int k = 0; k &lt; filter_h; k++) &#123;</span><br><span class="line">                for (int l = 0; l &lt; filter_w; l++) &#123;</span><br><span class="line">                    target_x = j - radius_x + l;</span><br><span class="line">                    target_y = i - radius_y + k;</span><br><span class="line"></span><br><span class="line">                    flag = target_x &gt;= 0 and target_x &lt; h and target_y &gt;= 0 and target_y &lt; w;</span><br><span class="line">                    if (flag) &#123;</span><br><span class="line">                        auto *src_data = src.ptr&lt;uchar&gt;(target_y);</span><br><span class="line">                        auto *filter_data = filter.ptr&lt;double&gt;(k);</span><br><span class="line">                        temp += (int) src_data[target_x] * filter_data[l];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            data[j] = (uchar) round(temp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">double GaussianFilter::gaussFilter2d(double x, double y, double sigma) &#123;</span><br><span class="line">//    double weight = 1 / (sqrt(2 * M_PI) * sigma);</span><br><span class="line">//    double temp = -1 * (x * x + y * y) / (2 * sigma * sigma);</span><br><span class="line">//    return weight * exp(temp);</span><br><span class="line">    return exp(-1 * (x * x + y * y) / (2 * sigma * sigma));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><p>参考：</p><p><a href="https://blog.csdn.net/lwx309025167/article/details/82761474" target="_blank" rel="noopener">算法优化学习：（二）二维高斯滤波的引入</a></p><p><a href="https://blog.csdn.net/zxpddfg/article/details/45912561" target="_blank" rel="noopener">二维高斯模糊和可分离核形式的快速实现</a></p><p>二维高斯分布公式可由两个一维高斯分布公式组成：</p><script type="math/tex;mode=display">
G(x,y) = G(x)\cdot G(y)</script><p>利用二维高斯模板对图像进行滤波：</p><script type="math/tex;mode=display">
f(x,y) = \frac {1}{\sum^{r}_{u=-r}\sum^{r}_{v=-r}G(u,v)}
\cdot \sum^{r}_{u=-r}\sum^{r}_{v=-r}G(u,v)\cdot I(x+u,y+v)</script><p>其中$I()$表示图像像素值，$r$表示模板半径，模板长宽为$2\cdot r+1$</p><p>利用一维高斯分布公式进行优化如下：</p><script type="math/tex;mode=display">
f(x,y) = \frac {1}{\sum^{r}_{u=-r}\sum^{r}_{v=-r}G(u,v)}
\cdot \sum^{r}_{u=-r}\sum^{r}_{v=-r}G(u,v)\cdot I(x+u,y+v)\\
=\frac {1}{\sum^{r}_{u=-r}\sum^{r}_{v=-r}G(u)\cdot G(v)}
\cdot \sum^{r}_{u=-r}\sum^{r}_{v=-r}G(u)\cdot G(v)\cdot I(x+u,y+v)\\
=\frac {1}{\sum^{r}_{u=-r}G(u)\cdot \sum^{r}_{v=-r} G(v)}
\cdot \sum^{r}_{u=-r}G(u)\cdot \sum^{r}_{v=-r} G(v)\cdot I(x+u,y+v)\\
=\frac {1}{\sum^{r}_{v=-r} G(v)}\cdot \sum^{r}_{u=-r}G(u) [
\frac {1}{\sum^{r}_{u=-r}G(u)}\cdot \sum^{r}_{v=-r} G(v)\cdot I(x+u,y+v)]</script><p>可以先在垂直方向对图像进行一维高斯变换，再在水平方向对图像进行一维高斯变换</p><p>按照原先的二维模板计算方式，对单个图像像素进行计算需要$(2\cdot r+1)^{2}$次乘法以及$(2\cdot r+1)^{2}-1$次加法，时间复杂度为$O(n^{2})$</p><p>如果转换成一维模板计算，先进行垂直方向计算，需要$(2\cdot r+1)$次乘法，$(2\cdot r+1)-1$次加法。对于水平方向计算类似，总共需要$2\cdot(2\cdot r+1)$次乘法，$2\cdot(2\cdot r+1)-2$次加法，时间复杂度为$O(n)$</p><p><em>单单对单个图像像素进行计算不太好理解，好像使用一维模板计算的只是沿该像素点水平和垂直的领域像素，没有涉及到对角领域像素；如果扩大到整副图像就好理解了</em></p><p>修改后的<code>GaussianFilter</code>实现如下：</p><ol><li><code>getGaussianKernel</code>生成一维高斯算子，参考<code>OpenCV</code>实现使用固定模板</li><li><code>GaussianBlur</code>先对水平方向进行高斯滤波，再对垂直方向进行高斯滤波</li></ol><p>完整类定义如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">// Created by zj on 19-8-13.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#ifndef OPENCV_PROJECT_GAUSSIANFILTER_H</span><br><span class="line">#define OPENCV_PROJECT_GAUSSIANFILTER_H</span><br><span class="line"></span><br><span class="line">#include &lt;cmath&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;opencv2/opencv.hpp&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line">using namespace cv;</span><br><span class="line"></span><br><span class="line">class GaussianFilter &#123;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    /**</span><br><span class="line">     * 高斯滤波操作</span><br><span class="line">     */</span><br><span class="line">    void GaussianBlur(Mat src, Mat &amp;dst, Size ksize, double sigmaX, double sigmaY = 0);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 生成一维高斯滤波内核</span><br><span class="line">     */</span><br><span class="line">    Mat getGaussianKernel(int ksize, double sigma, int ktype = CV_64F);</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    /**</span><br><span class="line">     * 二维卷积操作</span><br><span class="line">     * 边界使用0填充</span><br><span class="line">     */</span><br><span class="line">    void Conv2d(Mat src, Mat &amp;dst, Mat filter);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#endif //OPENCV_PROJECT_GAUSSIANFILTER_H</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">// Created by zj on 19-8-13.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#include &quot;GaussianFilter.h&quot;</span><br><span class="line"></span><br><span class="line">void GaussianFilter::GaussianBlur(Mat src, Mat &amp;dst, Size ksize, double sigmaX, double sigmaY) &#123;</span><br><span class="line">    sigmaY = sigmaY == 0 ? sigmaX : sigmaY;</span><br><span class="line"></span><br><span class="line">    int channels = src.channels();</span><br><span class="line">    Mat kernel_x = getGaussianKernel(ksize.width, sigmaX).reshape(1, 1);</span><br><span class="line">    Mat kernel_y = getGaussianKernel(ksize.height, sigmaY);</span><br><span class="line"></span><br><span class="line">    Mat tempImg = src.clone();</span><br><span class="line">    if (channels == 1) &#123;</span><br><span class="line">        Conv2d(src, tempImg, kernel_x);</span><br><span class="line">        Conv2d(tempImg, dst, kernel_y);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        vector&lt;Mat&gt; mats;</span><br><span class="line">        vector&lt;Mat&gt; dstMats;</span><br><span class="line">        split(src, mats);</span><br><span class="line">        for (auto srcImg: mats) &#123;</span><br><span class="line">            Mat dstImg = srcImg.clone();</span><br><span class="line">            Conv2d(srcImg, tempImg, kernel_x);</span><br><span class="line">            Conv2d(tempImg, dstImg, kernel_y);</span><br><span class="line"></span><br><span class="line">            dstMats.push_back(dstImg.clone());</span><br><span class="line">        &#125;</span><br><span class="line">        merge(dstMats, dst);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Mat GaussianFilter::getGaussianKernel(int ksize, double sigma, int ktype) &#123;</span><br><span class="line">    const int SMALL_GAUSSIAN_SIZE = 7;</span><br><span class="line">    static const float small_gaussian_tab[][SMALL_GAUSSIAN_SIZE] =</span><br><span class="line">            &#123;</span><br><span class="line">                    &#123;1.f&#125;,</span><br><span class="line">                    &#123;0.25f,    0.5f,      0.25f&#125;,</span><br><span class="line">                    &#123;0.0625f,  0.25f,     0.375f,   0.25f,    0.0625f&#125;,</span><br><span class="line">                    &#123;0.03125f, 0.109375f, 0.21875f, 0.28125f, 0.21875f, 0.109375f, 0.03125f&#125;</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">    const float *fixed_kernel = ksize % 2 == 1 &amp;&amp; ksize &lt;= SMALL_GAUSSIAN_SIZE &amp;&amp; sigma &lt;= 0 ?</span><br><span class="line">                                small_gaussian_tab[ksize &gt;&gt; 1] : nullptr;</span><br><span class="line"></span><br><span class="line">    Mat kernel = Mat(ksize, 1, ktype);</span><br><span class="line">    auto *cd = kernel.ptr&lt;double&gt;();</span><br><span class="line"></span><br><span class="line">    double sigmaX = sigma &gt; 0 ? sigma : ((ksize - 1) * 0.5 - 1) * 0.3 + 0.8;</span><br><span class="line">    double scale2X = -0.5 / (sigmaX * sigmaX);</span><br><span class="line">    double sum = 0;</span><br><span class="line"></span><br><span class="line">    int radius = ksize / 2;</span><br><span class="line">    int i;</span><br><span class="line">    for (i = 0; i &lt; ksize; i++) &#123;</span><br><span class="line">        double x = i - radius;</span><br><span class="line">        double t = fixed_kernel ? (double) fixed_kernel[i] : std::exp(scale2X * x * x);</span><br><span class="line"></span><br><span class="line">        cd[i] = t;</span><br><span class="line">        sum += cd[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sum = 1. / sum;</span><br><span class="line">    for (i = 0; i &lt; ksize; i++) &#123;</span><br><span class="line">        cd[i] *= sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return kernel;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void GaussianFilter::Conv2d(Mat src, Mat &amp;dst, Mat filter) &#123;</span><br><span class="line">    int filter_h = filter.rows;</span><br><span class="line">    int filter_w = filter.cols;</span><br><span class="line"></span><br><span class="line">    int radius_y = filter_h / 2;</span><br><span class="line">    int radius_x = filter_w / 2;</span><br><span class="line"></span><br><span class="line">    int h = src.rows;</span><br><span class="line">    int w = src.cols;</span><br><span class="line"></span><br><span class="line">    double temp;</span><br><span class="line">    int target_x;</span><br><span class="line">    int target_y;</span><br><span class="line">    bool flag;</span><br><span class="line">    for (int i = 0; i &lt; h; i++) &#123;</span><br><span class="line">        auto *data = dst.ptr&lt;uchar&gt;(i);</span><br><span class="line">        for (int j = 0; j &lt; w; j++) &#123;</span><br><span class="line">            temp = 0;</span><br><span class="line">            for (int k = 0; k &lt; filter_h; k++) &#123;</span><br><span class="line">                for (int l = 0; l &lt; filter_w; l++) &#123;</span><br><span class="line">                    target_x = j - radius_x + l;</span><br><span class="line">                    target_y = i - radius_y + k;</span><br><span class="line"></span><br><span class="line">                    flag = target_x &gt;= 0 and target_x &lt; h and target_y &gt;= 0 and target_y &lt; w;</span><br><span class="line">                    if (flag) &#123;</span><br><span class="line">                        auto *src_data = src.ptr&lt;uchar&gt;(target_y);</span><br><span class="line">                        auto *filter_data = filter.ptr&lt;double&gt;(k);</span><br><span class="line">                        temp += (int) src_data[target_x] * filter_data[l];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            data[j] = (uchar) round(temp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;sys/time.h&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;opencv2/opencv.hpp&gt;</span><br><span class="line">#include &quot;GaussianFilter.h&quot;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line">using namespace cv;</span><br><span class="line"></span><br><span class="line">string getMillisecond() &#123;</span><br><span class="line">    struct timeval tv;</span><br><span class="line">    gettimeofday(&amp;tv, NULL);</span><br><span class="line"></span><br><span class="line">    long int ms = tv.tv_sec * 1000 + tv.tv_usec / 1000;</span><br><span class="line">    return to_string(ms);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void opencv_gauss() &#123;</span><br><span class="line">    Mat img = imread(&quot;lena.jpg&quot;);</span><br><span class="line">    if (img.empty()) &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;error&quot; &lt;&lt; std::endl;</span><br><span class="line">        exit(0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Mat dst = img.clone();</span><br><span class="line">    GaussianBlur(img, dst, Size(5, 5), 1, 1);</span><br><span class="line"></span><br><span class="line">    imshow(&quot;img&quot;, img);</span><br><span class="line">    imshow(&quot;gauss&quot;, dst);</span><br><span class="line">    waitKey(0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void custom_gauss(int ksize = 3, double sigma = 1.0) &#123;</span><br><span class="line">    Mat img = imread(&quot;lena.jpg&quot;);</span><br><span class="line"></span><br><span class="line">    GaussianFilter gaussianFilter;</span><br><span class="line"></span><br><span class="line">    Mat dst1 = img.clone();</span><br><span class="line">    long int start = stol(getMillisecond());</span><br><span class="line">    gaussianFilter.GaussianBlur(img, dst1, Size(ksize, ksize), sigma);</span><br><span class="line">    long int end = stol(getMillisecond());</span><br><span class="line">    cout &lt;&lt; end - start &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    Mat dst2 = img.clone();</span><br><span class="line">    start = stol(getMillisecond());</span><br><span class="line">    GaussianBlur(img, dst2, Size(ksize, ksize), sigma);</span><br><span class="line">    end = stol(getMillisecond());</span><br><span class="line">    cout &lt;&lt; end - start &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    imshow(&quot;img&quot;, img);</span><br><span class="line">    imshow(&quot;dst1&quot;, dst1);</span><br><span class="line">    imshow(&quot;dst2&quot;, dst2);</span><br><span class="line">    waitKey(0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    custom_gauss(3, 0.85);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br></pre></td></tr></table></figure><p><code>CMakeLists.txt</code>内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 3.13)</span><br><span class="line">project(opencv_project)</span><br><span class="line"></span><br><span class="line">set(CMAKE_CXX_STANDARD 11)</span><br><span class="line"></span><br><span class="line">#set(CMAKE_PREFIX_PATH /home/zj/opencv/opencv-4.0.1/install)</span><br><span class="line">find_package( OpenCV REQUIRED )</span><br><span class="line">MESSAGE(&quot;OpenCV version: $&#123;OpenCV_VERSION&#125;&quot;)</span><br><span class="line">include_directories( $&#123;OpenCV_INCLUDE_DIRS&#125; )</span><br><span class="line"></span><br><span class="line">add_executable(opencv_project main.cpp GaussianFilter.cpp GaussianFilter.h)</span><br><span class="line"></span><br><span class="line">target_link_libraries( opencv_project $&#123;OpenCV_LIBS&#125; )</span><br></pre></td></tr></table></figure><p>测试结果如下（单位：<code>ms</code>）：</p><div class="table-container"><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">OpenCV</th><th style="text-align:center">自定义</th><th style="text-align:center">优化</th></tr></thead><tbody><tr><td style="text-align:center">3x3</td><td style="text-align:center">4</td><td style="text-align:center">67</td><td style="text-align:center">64</td></tr><tr><td style="text-align:center">5x5</td><td style="text-align:center">6</td><td style="text-align:center">182</td><td style="text-align:center">94</td></tr></tbody></table></div><p><em>进一步优化方向是多线程、编译优化、模板查表等</em></p></div><div class="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';"> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="/images/wechatpay.jpg" alt="zhujian 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="/images/alipay.jpg" alt="zhujian 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> zhujian</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.zhujian.tech/posts/80b530f2.html" title="高斯滤波">https://www.zhujian.tech/posts/80b530f2.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/c/" rel="tag"># c++</a> <a href="/tags/python/" rel="tag"># python</a> <a href="/tags/opencv/" rel="tag"># opencv</a> <a href="/tags/convolution/" rel="tag"># 卷积</a> <a href="/tags/numpy/" rel="tag"># numpy</a> <a href="/tags/matplotlib/" rel="tag"># matplotlib</a> <a href="/tags/gaussian-filter/" rel="tag"># 高斯滤波</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/posts/44a20d07.html" rel="next" title="[译]高效的基于图的图像分割"><i class="fa fa-chevron-left"></i> [译]高效的基于图的图像分割</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/posts/662946db.html" rel="prev" title="数据结构-图">数据结构-图<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments" id="gitalk-container"></div></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#高斯分布"><span class="nav-number">1.</span> <span class="nav-text">高斯分布</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#高斯噪声"><span class="nav-number">2.</span> <span class="nav-text">高斯噪声</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#高斯滤波"><span class="nav-number">3.</span> <span class="nav-text">高斯滤波</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#模板"><span class="nav-number">3.1.</span> <span class="nav-text">模板</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#彩色图像"><span class="nav-number">3.2.</span> <span class="nav-text">彩色图像</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#opencv实现"><span class="nav-number">4.</span> <span class="nav-text">opencv实现</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#getGaussianKernel"><span class="nav-number">4.1.</span> <span class="nav-text">getGaussianKernel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GaussianBlur"><span class="nav-number">4.2.</span> <span class="nav-text">GaussianBlur</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义实现（c-）"><span class="nav-number">5.</span> <span class="nav-text">自定义实现（c++）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#优化"><span class="nav-number">5.1.</span> <span class="nav-text">优化</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="zhujian" src="/images/avatar.png"><p class="site-author-name" itemprop="name">zhujian</p><div class="site-description" itemprop="description">one bite at a time</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">169</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">48</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">129</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="feed-link motion-element"><a href="/./atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/zjZSTU" title="Github &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;zjZSTU" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a></span><span class="links-of-author-item"><a href="https://blog.csdn.net/u012005313" title="CSDN &amp;rarr; https:&#x2F;&#x2F;blog.csdn.net&#x2F;u012005313" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i> CSDN</a></span><span class="links-of-author-item"><a href="/mailto:zjzstu@gmail.com" title="Gmail &amp;rarr; mailto:zjzstu@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> Gmail</a></span><span class="links-of-author-item"><a href="/mailto:505169307@gmail.com" title="QQmail &amp;rarr; mailto:505169307@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> QQmail</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://cloud.tencent.com/" title="https:&#x2F;&#x2F;cloud.tencent.com" rel="noopener" target="_blank">腾讯云</a></li><li class="links-of-blogroll-item"> <a href="https://www.aliyun.com/" title="https:&#x2F;&#x2F;www.aliyun.com" rel="noopener" target="_blank">阿里云</a></li><li class="links-of-blogroll-item"> <a href="https://developer.android.com/" title="https:&#x2F;&#x2F;developer.android.com&#x2F;" rel="noopener" target="_blank">Android Dev</a></li><li class="links-of-blogroll-item"> <a href="https://jenkins.io/" title="https:&#x2F;&#x2F;jenkins.io&#x2F;" rel="noopener" target="_blank">Jenkins</a></li><li class="links-of-blogroll-item"> <a href="http://cs231n.github.io/" title="http:&#x2F;&#x2F;cs231n.github.io&#x2F;" rel="noopener" target="_blank">cs231n</a></li><li class="links-of-blogroll-item"> <a href="https://pytorch.org/docs/stable/index.html" title="https:&#x2F;&#x2F;pytorch.org&#x2F;docs&#x2F;stable&#x2F;index.html" rel="noopener" target="_blank">pytorch</a></li><li class="links-of-blogroll-item"> <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" title="https:&#x2F;&#x2F;docs.docker.com&#x2F;install&#x2F;linux&#x2F;docker-ce&#x2F;ubuntu&#x2F;" rel="noopener" target="_blank">docker</a></li></ul></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">zhujian</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">948k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">26:20</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-bar-chart-o"></i></span> <a href="https://tongji.baidu.com/web/27249108/overview/index?siteId=13647183" rel="noopener" target="_blank">百度统计</a></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.5.0</div><div class="beian"> <a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">浙ICP备 19026415号</a> <span class="post-meta-divider">|</span> <img src="/images/beian_icon.png" style="display:inline-block;text-decoration:none;height:13px"> <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33011802001748" rel="noopener" target="_blank">浙公网安备 33011802001748号</a></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span> <span class="site-uv" title="总访客量">访客数：<span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="site-pv" title="总访问量">阅读量：<span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script color="17,63,61" opacity="1" zindex="-1" count="199" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script><script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"><script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '8f22595c6dd29c94467d',
      clientSecret: 'e66bd90ebb9aa66c562c753dec6c90ceecbd51f2',
      repo: 'guestbook',
      owner: 'zjZSTU',
      admin: ['zjZSTU'],
      id: '3ca41274dd3459945e9522ac301e66a1',
        language: '',
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script></body></html>